<form [formGroup]="formComplete" autocomplete="off">
    <div *ngFor="let sub of subList;let i=index;"
         style="background-color: #e3fcee; display: flow-root; padding-bottom: 15px;">

        <div [ngSwitch]="sub.elementType">
            <!--کد های قبلی-->
            <ng-container>
                <!--            <ng-container *ngSwitchCase="'TEXT_FIELD'">-->
                <!--                <ng-container *ngIf="sub.textFieldType!=='PASSWORD'">-->

                <!--                    <div class="col-md-2 text-center">-->
                <!--                        <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"-->
                <!--                             height="100px" width="100px">-->
                <!--                    </div>-->
                <!--                    <div class="col-md-8">-->
                <!--                        <div class="col-md-12 text-right">-->
                <!--                            <label class="control-label text-justify">{{sub.label }}-->
                <!--                                <span style="color: red" *ngIf="sub.required"> * </span>-->

                <!--                            </label>-->
                <!--                            <a class="toolTipColor" [title]="sub.helpText">-->
                <!--                                <i class="fa fa-info-circle"></i>-->
                <!--                            </a>-->
                <!--                        </div>-->
                <!--                        <div class="col-md-8 col-md-offset-2 text-center">-->
                <!--                            <ng-container *ngIf="formDataInternal.answerList[sub.index] === null">-->
                <!--                                <input class="form-control" [type]="sub.textFieldType | lowercase"-->
                <!--                                       attr.minlength="{{sub.minLength}}"-->
                <!--                                       attr.maxlength="{{sub.maxLength}}"-->
                <!--                                       [autocomplete]="'off' "-->
                <!--                                       [id]="sub.id"-->
                <!--                                       [placeholder]="sub.placeHolder"-->
                <!--                                       (change)="onChangeTextFieldRelated($event.target.value,sub)">-->
                <!--                            </ng-container>-->
                <!--                            <ng-container *ngIf="formDataInternal.answerList[sub.index] !== null">-->
                <!--                                <input class="form-control" [type]="sub.textFieldType | lowercase"-->
                <!--                                       [id]="sub.id"-->
                <!--                                       attr.minlength="{{sub.minLength}}"-->
                <!--                                       attr.maxlength="{{sub.maxLength}}"-->
                <!--                                       [autocomplete]="'off' "-->
                <!--                                       [placeholder]="sub.placeHolder"-->
                <!--                                       [formControlName]="'textField'"-->
                <!--                                       (change)="onChangeTextFieldRelated($event.target.value,sub)"-->
                <!--                                       [(ngModel)]="formDataInternal.answerList[sub.index].answerIdList[0]"-->
                <!--                                >-->
                <!--                            </ng-container>-->
                <!--                        </div>-->
                <!--                        &lt;!&ndash;                    /////////////////////////////////////////////////////////////////////////&ndash;&gt;-->
                <!--                        &lt;!&ndash;                    <ng-container *ngIf="formDataInternal.answerList[sub.index] == null">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        <div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.textFieldType != 'PASSWORD'">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            <input class="form-control" [type]="sub.textFieldType | lowercase"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.minlength="{{sub.minLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.maxlength="{{sub.maxLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   [placeholder]="sub.textFieldType==='PASSWORD'?'******':sub.placeHolder"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   (change)="onChangeTextFieldRelated($event.target.value,sub)">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        <div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.textFieldType == 'PASSWORD'">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            <input class="form-control" [type]="sub.textFieldType | lowercase"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.minlength="{{sub.minLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.maxlength="{{sub.maxLength}}" placeholder="******"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   autocomplete="new-password"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   (change)="onChangeTextFieldRelated($event.target.value,sub)">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                    </ng-container>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                    <ng-container&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            *ngIf="formDataInternal.answerList[sub.index] != null">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        <div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.textFieldType != 'PASSWORD'">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            <input class="form-control" [type]="sub.textFieldType | lowercase"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.minlength="{{sub.minLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.maxlength="{{sub.maxLength}}" [placeholder]="sub.placeHolder"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   [(ngModel)]="formDataInternal.answerList[sub.index].answerIdList[0]"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   formControlName="textField"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   (change)="onChangeTextFieldRelated($event.target.value,sub)"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            >&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        <div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.textFieldType == 'PASSWORD'">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            <input class="form-control" [type]="sub.textFieldType | lowercase"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.minlength="{{sub.minLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.maxlength="{{sub.maxLength}}" placeholder="******"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   [(ngModel)]="formDataInternal.answerList[sub.index].answerIdList[0]"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   autocomplete="new-password"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   formControlName="textField"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   (change)="onChangeTextFieldRelated($event.target.value,sub)"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            >&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                    </ng-container>&ndash;&gt;-->

                <!--                    </div>-->
                <!--                    <div class="col-md-12">-->
                <!--                        <br>-->
                <!--                        <hr>-->
                <!--                    </div>-->
                <!--                </ng-container>-->
                <!--            </ng-container>-->
                <!--            <ng-container *ngSwitchCase="'TEXT_FIELD'">-->
                <!--                <ng-container *ngIf="sub.textFieldType==='PASSWORD'">-->

                <!--                    <div class="col-md-2 text-center">-->
                <!--                        <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"-->
                <!--                             height="100px" width="100px">-->
                <!--                    </div>-->
                <!--                    <div class="col-md-8">-->
                <!--                        <div class="col-md-12 text-right">-->
                <!--                            <label class="control-label text-justify">{{sub.label }}-->
                <!--                                <span style="color: red" *ngIf="sub.required"> * </span>-->
                <!--                            </label>-->
                <!--                            <a class="toolTipColor" [title]="sub.helpText">-->
                <!--                                <i class="fa fa-info-circle"></i>-->
                <!--                            </a>-->
                <!--                        </div>-->
                <!--                        <div class="col-md-8 col-md-offset-2 text-center">-->
                <!--                            <ng-container *ngIf="formDataInternal.answerList[sub.index] === null">-->
                <!--                                <input class="form-control" [type]="sub.textFieldType | lowercase"-->
                <!--                                       [id]="sub.id"-->
                <!--                                       attr.minlength="{{sub.minLength}}"-->
                <!--                                       attr.maxlength="{{sub.maxLength}}"-->
                <!--                                       [autocomplete]="'new-password' "-->
                <!--                                       [placeholder]="'******'"-->
                <!--                                       (change)="onChangeTextFieldRelated($event.target.value,sub)">-->
                <!--                            </ng-container>-->
                <!--                            <ng-container *ngIf="formDataInternal.answerList[sub.index] !== null">-->
                <!--                                <input class="form-control" [type]="sub.textFieldType | lowercase"-->
                <!--                                       [id]="sub.id"-->
                <!--                                       attr.minlength="{{sub.minLength}}"-->
                <!--                                       attr.maxlength="{{sub.maxLength}}"-->
                <!--                                       [autocomplete]="'new-password' "-->
                <!--                                       [placeholder]="'******'"-->
                <!--                                       [formControlName]="'password'"-->
                <!--                                       (change)="onChangeTextFieldRelated($event.target.value,sub)"-->
                <!--                                       [(ngModel)]="formDataInternal.answerList[sub.index].answerIdList[0]"-->
                <!--                                >-->
                <!--                            </ng-container>-->
                <!--                        </div>-->
                <!--                        &lt;!&ndash;                    /////////////////////////////////////////////////////////////////////////&ndash;&gt;-->
                <!--                        &lt;!&ndash;                    <ng-container *ngIf="formDataInternal.answerList[sub.index] == null">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        <div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.textFieldType != 'PASSWORD'">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            <input class="form-control" [type]="sub.textFieldType | lowercase"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.minlength="{{sub.minLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.maxlength="{{sub.maxLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   [placeholder]="sub.textFieldType==='PASSWORD'?'******':sub.placeHolder"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   (change)="onChangeTextFieldRelated($event.target.value,sub)">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        <div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.textFieldType == 'PASSWORD'">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            <input class="form-control" [type]="sub.textFieldType | lowercase"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.minlength="{{sub.minLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.maxlength="{{sub.maxLength}}" placeholder="******"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   autocomplete="new-password"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   (change)="onChangeTextFieldRelated($event.target.value,sub)">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                    </ng-container>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                    <ng-container&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            *ngIf="formDataInternal.answerList[sub.index] != null">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        <div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.textFieldType != 'PASSWORD'">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            <input class="form-control" [type]="sub.textFieldType | lowercase"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.minlength="{{sub.minLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.maxlength="{{sub.maxLength}}" [placeholder]="sub.placeHolder"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   [(ngModel)]="formDataInternal.answerList[sub.index].answerIdList[0]"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   formControlName="textField"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   (change)="onChangeTextFieldRelated($event.target.value,sub)"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            >&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        <div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.textFieldType == 'PASSWORD'">&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            <input class="form-control" [type]="sub.textFieldType | lowercase"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.minlength="{{sub.minLength}}"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   attr.maxlength="{{sub.maxLength}}" placeholder="******"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   [(ngModel)]="formDataInternal.answerList[sub.index].answerIdList[0]"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   autocomplete="new-password"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   formControlName="textField"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                                   (change)="onChangeTextFieldRelated($event.target.value,sub)"&ndash;&gt;-->
                <!--                        &lt;!&ndash;                            >&ndash;&gt;-->
                <!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
                <!--                        &lt;!&ndash;                    </ng-container>&ndash;&gt;-->

                <!--                    </div>-->
                <!--                    <div class="col-md-12">-->
                <!--                        <br>-->
                <!--                        <hr>-->
                <!--                    </div>-->
                <!--                </ng-container>-->

                <!--            </ng-container>-->
            </ng-container>


            <!--                TEXT_FIELD-->

            <ng-container *ngSwitchCase="'TEXT_FIELD'">
                <ng-container *ngIf="formData.answerList[sub.index]">
                    <div class="col-md-2 text-center">
                        <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                             height="100px" width="100px">
                    </div>
                    <div class="col-md-8">
                        <div class="col-md-12 text-right">
                            <label class="control-label text-justify">{{ sub.label }}
                                <span style="color: red" *ngIf="sub.required"> * </span>
                            </label>
                            <a class="toolTipColor" [title]="sub.helpText">
                                <i class="fa fa-info-circle"></i>
                            </a>

                        </div>
                        <!--                                sub.textFieldType==='Email'-->
                        <ng-container *ngIf="sub.textFieldType==='EMAIL'">
                            <div class="col-md-8 col-md-offset-2 text-center">
                                <ng-container
                                        *ngIf="formStatus!== 'pending' || isView||!enableItems;else enabledInputEmail">
                                    <input class="form-control" [type]="sub.textFieldType | lowercase"
                                           [id]="sub.id"
                                           attr.minlength="{{sub.minLength}}"
                                           attr.maxlength="{{sub.maxLength}}"
                                           [placeholder]="sub.placeHolder"
                                           [formControlName]="'email'"
                                           [(ngModel)]="formData?.answerList[sub.index]?.answerIdList[0]"
                                           disabled
                                    >

                                </ng-container>
                                <ng-template #enabledInputEmail>

                                    <input class="form-control" [type]="sub.textFieldType | lowercase"
                                           [id]="sub.id"
                                           attr.minlength="{{sub.minLength}}"
                                           attr.maxlength="{{sub.maxLength}}"
                                           [placeholder]="sub.placeHolder"
                                           [nbvPattern]="myPattern.email"
                                           [formControlName]="'email'"
                                           nbvPatternMsgHtml="مقدار وارد شده صحیح نیست."
                                           (change)="onChangeTextFieldRelated($event.target.value,sub)"
                                           [(ngModel)]="formData?.answerList[sub.index]?.answerIdList[0]"
                                           dest="emailValidation"

                                    >
                                </ng-template>

                            </div>
                            <div id="emailValidation"></div>


                        </ng-container>
                        <!--                                sub.textFieldType==='NUMBER'-->

                        <ng-container *ngIf="sub.textFieldType==='NUMBER'">
                            <div class="col-md-8 col-md-offset-2 text-center">
                                <ng-container
                                        *ngIf="formStatus!== 'pending' || isView||!enableItems;else  enabledInputNumber">
                                    <input class="form-control" [type]="sub.textFieldType | lowercase"
                                           [id]="sub.id"
                                           attr.minlength="{{sub.minLength}}"
                                           attr.maxlength="{{sub.maxLength}}"
                                           [placeholder]="sub.placeHolder"
                                           [formControlName]="'number'"
                                           [(ngModel)]="formData?.answerList[sub.index]?.answerIdList[0]"
                                           disabled
                                    >
                                </ng-container>
                                <ng-template #enabledInputNumber>
                                    <input class="form-control" [type]="sub.textFieldType | lowercase"
                                           [id]="sub.id"
                                           attr.minlength="{{sub.minLength}}"
                                           attr.maxlength="{{sub.maxLength}}"
                                           [placeholder]="sub.placeHolder"
                                           [nbvPattern]="myPattern.number"
                                           nbvPatternMsgHtml="مقدار وارد شده صحیح نیست."
                                           [formControlName]="'number'"
                                           (change)="onChangeTextFieldRelated($event.target.value,sub)"
                                           [(ngModel)]="formData?.answerList[sub.index]?.answerIdList[0]"
                                           dest="numberValidation"
                                    >
                                </ng-template>

                            </div>
                            <div id="numberValidation"></div>

                        </ng-container>
                        <!--                                sub.textFieldType==='TEXT'-->

                        <ng-container *ngIf="sub.textFieldType==='TEXT'">
                            <div class="col-md-8 col-md-offset-2 text-center">
                                <ng-container
                                        *ngIf="formStatus!== 'pending' || isView||!enableItems;else enabledInputText">
                                    <input class="form-control" [type]="sub.textFieldType | lowercase"
                                           [id]="sub.id"
                                           attr.minlength="{{sub.minLength}}"
                                           attr.maxlength="{{sub.maxLength}}"
                                           [placeholder]="sub.placeHolder"
                                           [formControlName]="'textField'"
                                           [(ngModel)]="formData.answerList[sub.index].answerIdList[0]"
                                           disabled
                                    >
                                </ng-container>
                                <ng-template #enabledInputText>
                                    <input class="form-control" [type]="sub.textFieldType | lowercase"
                                           [id]="sub.id"
                                           attr.minlength="{{sub.minLength}}"
                                           attr.maxlength="{{sub.maxLength}}"
                                           [placeholder]="sub.placeHolder"
                                           [nbvPattern]="myPattern.TITLEFa"
                                           nbvPatternMsgHtml="مقدار وارد شده صحیح نیست."
                                           [formControlName]="'textField'"
                                           (change)="onChangeTextFieldRelated($event.target.value,sub)"
                                           [(ngModel)]="formData?.answerList[sub.index]?.answerIdList[0]"
                                           [disabled]="formStatus!== 'pending' || isView||!enableItems"
                                           dest="textFieldValidation"
                                    >
                                </ng-template>

                            </div>
                            <div id="textFieldValidation"></div>
                        </ng-container>
                        <!--                                sub.textFieldType==='PASSWORD'-->

                        <ng-container *ngIf="sub.textFieldType==='PASSWORD'">
                            <div class="col-md-8 col-md-offset-2 text-center">
                                <ng-container
                                        *ngIf="formStatus!== 'pending' || isView||!enableItems;else enabledInputPassword">
                                    <input class="form-control" [type]="sub.textFieldType | lowercase"
                                           [id]="sub.id"
                                           attr.minlength="{{sub.minLength}}"
                                           attr.maxlength="{{sub.maxLength}}"
                                           [autocomplete]="'new-password' "
                                           [placeholder]="sub.placeHolder"
                                           [formControlName]="'password'"
                                           [(ngModel)]="formData?.answerList[sub.index]?.answerIdList[0]"
                                           disabled
                                    >
                                </ng-container>
                                <ng-template #enabledInputPassword>
                                    <input class="form-control" [type]="sub.textFieldType | lowercase"
                                           [id]="sub.id"
                                           attr.minlength="{{sub.minLength}}"
                                           attr.maxlength="{{sub.maxLength}}"
                                           [autocomplete]="'new-password' "
                                           [placeholder]="sub.placeHolder"
                                           [nbvPattern]="myPattern.TITLEFa"
                                           nbvPatternMsgHtml="مقدار وارد شده صحیح نیست."
                                           [formControlName]="'password'"
                                           (change)="onChangeTextFieldRelated($event.target.value,sub)"
                                           [(ngModel)]="formData?.answerList[sub.index]?.answerIdList[0]"
                                           [disabled]="formStatus!== 'pending' || isView||!enableItems"
                                           dest="passwordValidation"
                                    >
                                </ng-template>

                            </div>
                            <div id="passwordValidation"></div>
                        </ng-container>


                    </div>
                    <div class="col-md-12">
                        <br>
                        <hr>
                    </div>
                </ng-container>
            </ng-container>


            <!--            CHECK_BOX-->
            <div *ngSwitchCase="'CHECK_BOX'">
                <div class="col-md-2 text-center">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                         height="100px" width="100px">
                </div>
                <div class="col-md-8">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <ng-container
                            *ngIf="formDataInternal.answerList[subIndex] == null">
                        <div *ngFor="let chh of list[subIndex].optionList;let q=index;">
                            <div class="col-md-12">
                                <div class="col-md-1">
                                    <input type="checkbox" name="selection{{sub.id}}" [value]="chh.id"
                                           (click)="onChangeCheckRelated($event.target.value, sub,i)"
                                           [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                    >
                                    <!--                                    attr.data-target="#subQuestionCheck{{chh.id}}" data-toggle="collapse"-->
                                </div>
                                <div class="col-md-1 text-center" *ngIf="chh.imageStatus == MyImageStatus.SAVED_IMAGE">
                                    <img [src]="url + chh.url" height="50px" width="50px">
                                </div>
                                <div class="col-md-5 text-left">
                                    <span>&nbsp;&nbsp;{{chh.caption}}</span>
                                </div>
                            </div>
                            <!--                                    اگر زیر سوال داشت-->
                            <ng-container
                                    *ngIf="hideCollapse(sub.index,chh,'subQuestionCheck'+sub.index+'-'+q)==true">
                                <ng-container [ngTemplateOutlet]="subQuestionDisplayCHECK_BOXTemp"
                                              [ngTemplateOutletContext]="{$implicit:chh,q:q }">
                                </ng-container>
                            </ng-container>
                        </div>
                    </ng-container>
                    <ng-container
                            *ngIf="formDataInternal.answerList[subIndex] != null">
                        <div *ngFor="let chh of list[subIndex].optionList;let q=index;">
                            <div class="col-md-12">
                                <div class="col-md-1">
                                    <!--                                           [checked]="formDataInternal.answerList[subIndex].answerIdList[0] == chh.id"-->
                                    <!--                                           (click)="onChangeCheckRelated($event.target.value, sub,i)"-->
                                    <!--                                           (change)="changeCheck()"-->
                                    <!--                                           [disabled]="finalLevel === false|| formStatus!== 'pending' || isView||!enableItems"-->
                                    <input type="checkbox" name="selection{{sub.id}}" [value]="chh.id"
                                           [checked]="getChecked(sub,chh)"
                                           (click)="onChangeCheck($event.target.checked, chh.id,sub.index,sub,'subQuestionCheck'+chh.id)"
                                           [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                           data-toggle="collapse">
                                    <!--                                    attr.data-target="#subQuestionCheck{{chh.id}}"-->
                                </div>
                                <div class="col-md-1 text-center" *ngIf="chh.imageStatus == MyImageStatus.SAVED_IMAGE">
                                    <img [src]="url + chh.url" height="50px" width="50px">
                                </div>
                                <div class="col-md-5 text-left">
                                    <span>&nbsp;&nbsp;{{chh.caption}}</span>
                                </div>
                            </div>
                            <!--                                    اگر زیر سوال داشت-->
                            <ng-container
                                    *ngIf="hideCollapse(sub.index,chh,'subQuestionCheck'+sub.index+'-'+q)==true">
                                <ng-container [ngTemplateOutlet]="subQuestionDisplayCHECK_BOXTemp"
                                              [ngTemplateOutletContext]="{$implicit:chh,q:q }">
                                </ng-container>
                            </ng-container>
                        </div>
                    </ng-container>
                </div>
                <!--                <div class="col-md-12" *ngFor="let chh of list[subIndex].optionList;let q=index;">-->
                <!--                    <div *ngIf="chh.subQuestionList.length!=0">-->
                <!--                        <div *ngIf="hideCollapse(sub.id,chh,'subQuestionCheck'+chh.id)==true"-->
                <!--                             class="panel-collapse collapse"-->
                <!--                             id="subQuestionCheck{{chh.id}}">-->
                <!--                            <br>-->
                <!--                            <app-sub-question-display [subList]="chh.subQuestionList" [list]="list"-->
                <!--                                                      [formData]="formDataInternal"-->
                <!--                                                      (onAnswer)="fillAnswer($event)"></app-sub-question-display>-->
                <!--                        </div>-->
                <!--                    </div>-->
                <!--                </div>-->


                <ng-template #subQuestionDisplayCHECK_BOXTemp let-chh let-q>
                    <div style="margin-top: 0px;margin-bottom: 0px;"
                         id="subQuestionCheck{{sub.index}}-{{q}}">
                        <app-sub-question-display [subList]="chh.subQuestionList" [list]="list"
                                                  [formData]="formDataInternal"
                                                  [finalLevel]="finalLevel"
                                                  [isView]="isView"
                                                  [formStatus]="formStatus"
                                                  [enableItems]="enableItems"
                                                  (onAnswer)="fillAnswer($event)">
                        </app-sub-question-display>
                    </div>
                </ng-template>
                <!--<div class="col-md-12">-->
                <!--<br>-->
                <!--<hr>-->
                <!--</div>-->
            </div>
            <!--            RADIO_BUTTON-->
            <div *ngSwitchCase="'RADIO_BUTTON'">
                <div class="col-md-2">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                         height="100px" width="100px">
                </div>
                <ng-container
                        *ngIf="formDataInternal.answerList[subIndex] == null">
                    <div class="col-md-8">
                        <div class="col-md-12 text-right">
                            <label class="control-label">{{sub.label }}
                                <span style="color: red" *ngIf="sub.required"> * </span>
                            </label>
                            <a class="toolTipColor" [title]="sub.helpText">
                                <i class="fa fa-info-circle"></i>
                            </a>
                        </div>
                        <div *ngFor="let chh of list[subIndex].optionList;let j=index">
                            <div class="row col-md-12">
                                <div class="col-md-1">
                                    <input type="radio" [value]="chh.id" name="radio{{sub.id}}"
                                           (click)="onChangeRadioRelated($event.target.value,sub)"
                                           [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                    >
                                    <!--                                    attr.data-target="#subQuestionRadio{{chh.id}}" data-toggle="collapse"-->
                                </div>
                                <div class="col-md-1 text-center" *ngIf="chh.imageStatus == MyImageStatus.SAVED_IMAGE">
                                    <img [src]="url + chh.path" height="50px" width="50px">
                                </div>
                                <div class="col-md-5 text-right">
                                    <span>&nbsp;&nbsp;{{chh.caption}}</span>
                                </div>
                            </div>
                            <!--                                    اگر زیر سوال داشت-->
                            <ng-container
                                    *ngIf="hideCollapse(sub.index,chh,'subQuestionRadio'+sub.index+'-'+j)===true">
                                <ng-container [ngTemplateOutlet]="subQuestionDisplay_RADIO_BUTTON"
                                              [ngTemplateOutletContext]="{$implicit:chh,q:j }">
                                </ng-container>
                            </ng-container>
                        </div>
                    </div>
                </ng-container>
                <ng-container
                        *ngIf="formDataInternal.answerList[subIndex] != null">
                    <div class="col-md-8">
                        <div class="col-md-12 text-right">
                            <label class="control-label">{{sub.label }}
                                <span style="color: red" *ngIf="sub.required"> * </span>
                            </label>
                            <a class="toolTipColor" [title]="sub.helpText">
                                <i class="fa fa-info-circle"></i>
                            </a>
                        </div>
                        <div *ngFor="let chh of list[subIndex].optionList;let j=index">
                            <label style="width: 100%;cursor: pointer">

                                <div class="row col-md-12">
                                    <div class="col-md-1">
                                        <input type="radio" [value]="chh.id" name="radio{{sub.id}}"
                                               [checked]="formDataInternal.answerList[subIndex].answerIdList[0] == chh.id"
                                               (click)="onChangeRadioRelated($event.target.value,sub)"
                                               [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                        >
                                        <!--                                        attr.data-target="#subQuestionRadio{{chh.id}}" data-toggle="collapse"-->
                                    </div>
                                    <div class="col-md-1 text-center"
                                         *ngIf="chh.imageStatus == MyImageStatus.SAVED_IMAGE">
                                        <img [src]="url + chh.path" height="50px" width="50px">
                                    </div>
                                    <div class="col-md-5 text-right">
                                        <span>&nbsp;&nbsp;{{chh.caption}}</span>
                                    </div>
                                </div>
                            </label>
                            <!--                                    اگر زیر سوال داشت-->
                            <ng-container
                                    *ngIf="hideCollapse(sub.index,chh,'subQuestionRadio'+sub.index+'-'+j)===true">
                                <ng-container [ngTemplateOutlet]="subQuestionDisplay_RADIO_BUTTON"
                                              [ngTemplateOutletContext]="{$implicit:chh,q:j }">
                                </ng-container>
                            </ng-container>
                        </div>


                    </div>
                </ng-container>
                <!--                <div class="col-md-12" *ngFor="let chh of sub.optionList;let q=index;">-->
                <!--                    <div *ngIf="chh.subQuestionList.length!=0">-->
                <!--                        <div *ngIf="hideCollapse(sub.id,chh,'subQuestionRadio'+chh.id)==true"-->
                <!--                             class="panel-collapse collapse"-->
                <!--                             id="subQuestionRadio{{chh.id}}">-->
                <!--                            <br>-->
                <!--                            <app-sub-question-display [subList]="chh.subQuestionList" [list]="list"-->
                <!--                                                      [formData]="formDataInternal"-->
                <!--                                                      (onAnswer)="fillAnswer($event)"></app-sub-question-display>-->
                <!--                        </div>-->
                <!--                    </div>-->
                <!--                </div>-->


                <ng-template #subQuestionDisplay_RADIO_BUTTON let-chh let-q>
                    <div
                            class="panel-collapse collapse"
                            style="margin-top: 0px;margin-bottom: 0px;"
                            id="subQuestionRadio{{sub.index}}-{{q}}">
                        <app-sub-question-display [subList]="chh.subQuestionList" [list]="list"
                                                  [formData]="formDataInternal"
                                                  [finalLevel]="finalLevel"
                                                  [isView]="isView"
                                                  [formStatus]="formStatus"
                                                  [enableItems]="enableItems"
                                                  (onAnswer)="fillAnswer($event)">
                        </app-sub-question-display>

                    </div>
                </ng-template>
            </div>
            <!--            COMBO_BOX-->
            <div *ngSwitchCase="'COMBO_BOX'">

                <div class="col-md-2">
                    <!--<img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"-->
                    <!--height="100px" width="100px">-->
                </div>
                <div class="col-md-8">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <!--<div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.comboBoxType=='SINGLE'">-->
                    <!--<select class="col-md-8 col-md-offset-2" name="selectedSingle{{i}}"-->
                    <!--(change)="onChangeComboSingleRelated($event.target.value,sub, i)"-->
                    <!--formControlName="combo">-->
                    <!--<option *ngFor="let singleOpt of sub.comboOptionList;let j=index;" [value]="singleOpt"-->
                    <!--[selected]="j===0"> {{singleOpt}}-->
                    <!--</option>-->
                    <!--</select>-->
                    <!--</div>-->
                    <!--<div class="col-md-8 col-md-offset-2 text-center" *ngIf="sub.comboBoxType=='MULTIPLE'">-->
                    <!--<select class="col-md-8 col-md-offset-2" name="selectedMulti{{i}}" multiple="multiple"-->
                    <!--[(ngModel)]="combo[i]"-->
                    <!--(change)="onChangeComboMultiRelated(sub,i)" formControlName="combo">-->
                    <!--<option *ngFor="let multiOpt of sub.comboOptionList;let k=index;" [value]="multiOpt"-->
                    <!--[selected]="k===0"> {{multiOpt}}-->
                    <!--</option>-->
                    <!--</select>-->
                    <!--</div>   -->

                    <div class="col-md-8 col-md-offset-2 text-center">
                        <ng-select class="col-md-8 col-md-offset-2"
                                   style="width: 100% !important; max-width: 100%;"
                                   [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                   [(ngModel)]="combo[i]"
                                   [placeholder]="list[subIndex].placeHolder"
                                   (change)="onChangeComboMultiRelated(sub,i)" formControlName="combo">
                            <ng-container *ngFor="let multiOpt of list[subIndex].comboOptionList;let k=index;">

                                <ng-option [value]="multiOpt"> {{multiOpt}}
                                </ng-option>
                            </ng-container>
                        </ng-select>
                    </div>
                </div>
                <br>
                <hr>
            </div>
            <!--            TEXT_AREA-->
            <div *ngSwitchCase="'TEXT_AREA'">
                <div class="col-md-2">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                         height="100px" width="100px">
                </div>
                <div class="col-md-8">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <ng-container
                            *ngIf="formDataInternal.answerList[sub.index] == null">
                        <div class="col-md-8 col-md-offset-2 text-center">
              <textarea class="form-control" [id]="sub.id" [placeholder]="sub.placeHolder"
                        [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                        type="text" (change)="onChangeTextAreaRelated($event.target.value,sub)">
              </textarea>
                        </div>
                    </ng-container>
                    <ng-container
                            *ngIf="formDataInternal.answerList[sub.index] != null">
                        <div class="col-md-8 col-md-offset-2 text-center">
              <textarea class="form-control" [id]="sub.id"
                        [(ngModel)]="formDataInternal?.answerList[sub.index]?.answerIdList[0]"
                        formControlName="textArea"
                        [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"

                        type="text" (change)="onChangeTextAreaRelated($event.target.value,sub)">
              </textarea>
                        </div>
                    </ng-container>
                </div>
                <br>
                <hr>
            </div>
            <!--            DATE-->
            <div *ngSwitchCase="'DATE'">
                <div class="col-md-2">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                         height="100px" width="100px">
                </div>
                <div class="col-md-8">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <div class="col-md-8 col-md-offset-2">
                        <div class="input-group">
                            <div class="input-group-addon">
                                <span class="far fa-calendar-alt" id="date{{i}}" (click)="showDate(i)"></span>
                            </div>
                            <input type="text" class="form-control col-md-3" id="inputDate{{i}}" #Date
                                   placeholder="تاریخ را وارد کنید"
                                   [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                   (click)="onChangeDateRelated($event.target.value,sub,i)"/>
                        </div>
                    </div>
                </div>
                <br>
                <hr>
            </div>
            <!--            TIME-->
            <div *ngSwitchCase="'TIME'">
                <div class="col-md-2">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                         height="100px" width="100px">
                </div>
                <div class="col-md-8">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <div class="col-md-8 col-md-offset-2">
                        <ng-container
                                *ngIf="formStatus!== 'pending' || isView||!enableItems;else enabledTime">
                            <input type="text" [textMask]="{mask: mask}" class="form-control input-small"
                                   id="timePicker{{i}}"
                                   disabled
                                   [value]="formData?.answerList[sub.index]?.answerIdList[0]?.hour+':'+formData?.answerList[sub.index]?.answerIdList[0]?.minute"

                                   #time (change)="onChangeTimeRelated($event.target.value,sub)" formControlName="time"/>
                        </ng-container>
                        <ng-template #enabledTime>

                            <input type="text" [textMask]="{mask: mask}" class="form-control input-small"
                                   id="timePicker{{i}}"
                                   [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                   [value]="formData?.answerList[sub.index]?.answerIdList[0]?.hour+':'+formData?.answerList[sub.index]?.answerIdList[0]?.minute"

                                   #time (change)="onChangeTimeRelated($event.target.value,sub)" formControlName="time"/>
                        </ng-template>
<!--                        <input type="text" [textMask]="{mask: mask}" class="form-control input-small"-->
<!--                               id="timePicker{{i}}"-->
<!--                               [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"-->
<!--                               [value]="formData?.answerList[sub.index]?.answerIdList[0]?.hour+':'+formData?.answerList[sub.index]?.answerIdList[0]?.minute"-->

<!--                               #time (change)="onChangeTimeRelated($event.target.value,sub)" formControlName="time"/>-->


                    </div>
                </div>
            </div>
            <!--            NUMERICAL-->
            <div *ngSwitchCase="'NUMERICAL'">
                <div class="col-md-2">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                         height="100px" width="100px">
                </div>
                <div class="col-md-8">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <div class="col-md-10 col-md-offset-1">
                        <div class="col-md-2 text-right">{{sub.endLabel}}</div>
                        <div class="col-md-8 text-center">
                            <p-slider id="slider" [min]="sub.minLength" [max]="sub.maxLength" [step]="sub.step"
                                      [(ngModel)]="slider[i]" formControlName="slider"
                                      [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                      (click)="onChangeSliderRelated(sub,i)"></p-slider>
                        </div>
                        <div class="col-md-2 text-left">{{sub.beginLabel}}</div>
                    </div>
                </div>
                <br>
                <hr>
            </div>
            <!--            STAR_RATING-->
            <div *ngSwitchCase="'STAR_RATING'">
                <div class="col-md-2">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                         height="100px" width="100px">
                </div>
                <div class="col-md-8">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <div class="col-md-8 col-md-offset-2 text-center">
                        <!--<star-rating-comp [starType]="'svg'" [direction]="sub.direction"-->
                        <!--[showHalfStars]="true" [labelPosition]="'top'" [numOfStars]="sub.starCount"-->
                        <!--[rating]="sub.initialRate" [staticColor]="sub.colorStatus"-->
                        <!--(onRatingChange)="onChangeStarRatingRelated($event, sub)"></star-rating-comp>-->
                    </div>
                </div>
                <br>
                <hr>
            </div>
            <!--            MATRIX-->
            <div *ngSwitchCase="'MATRIX'">
                <div class="col-md-2">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.path"
                         height="100px" width="100px">
                </div>
                <div class="col-md-8">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <div class="col-md-8 col-md-offset-2">
                        <table class="table table-striped table-hover table-bordered table-condensed text-center">
                            <tr>
                                <td></td>
                                <ng-container *ngFor="let opt of sub.optionList">
                                    <td>
                                        <span>{{opt.caption}}</span>
                                        <img *ngIf="opt.imageStatus == MyImageStatus.SAVED_IMAGE"
                                             [src]="url + opt.path" height="30px" width="30px">
                                    </td>
                                </ng-container>
                            </tr>
                            <tr *ngFor="let question of sub.matrixQuestionList; let q=index;">
                                <td>{{question.title}}</td>
                                <td *ngFor="let option of sub.optionList; let o=index;">
                                    <input name="matrixRadio{{i}}{{q}}" *ngIf="question.multipleSelect==false"
                                           type="radio"
                                           [value]="option.id"
                                           [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                           (click)="onChangeMatrixRelated($event.target.value,sub,i,q,question.multipleSelect,question.title)">
                                    <input name="matrixCheck{{i}}{{q}}" *ngIf="question.multipleSelect==true"
                                           type="checkbox"
                                           [value]="option.id"
                                           [disabled]="finalLevel === false ||formStatus!== 'pending' || isView||!enableItems"
                                           (click)="onChangeMatrixRelated($event.target.value,sub,i,q,question.multipleSelect,question.title)">
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <br>
                <hr>
            </div>
            <!--            FILE_ATTACH-->
            <ng-container *ngSwitchCase="'FILE_ATTACH'">
                <div class="col-md-2 text-center">
                    <img *ngIf="sub.imageStatus == MyImageStatus.SAVED_IMAGE" [src]="url + sub.picture.path"
                         height="100px" width="100px">
                </div>
                <div class="col-md-10">
                    <div class="col-md-12 text-right">
                        <label class="control-label text-justify">{{sub.label }}
                            <span style="color: red" *ngIf="sub.required"> * </span>
                        </label>
                        <a class="toolTipColor" [title]="sub.helpText">
                            <i class="fa fa-info-circle"></i>
                        </a>
                    </div>
                    <div class="col-md-12">
                        <br>
                    </div>
                    <div class="col-md-8 col-md-offset-2" *ngIf="sub.fileType == 'PDF'">
                        <label>فایل ضمیمه</label>
                        <span>(فایل با پسوند PDF و حجم کمتر از یک مگابایت باشد.)</span>
                        <app-attachment
                                [attachmentList]="null"
                                [limitation]="sub.fileCountLimitation"
                                (outputAttachmentList)="setAttachments($event, sub,i)">
                        </app-attachment>
                    </div>
                    <div class="col-md-8 col-md-offset-2" *ngIf="sub.fileType == 'IMAGE'">
                        <ng-container *ngIf="sub.fileCountLimitation == 1">
                            <app-image-upload [image]="image" [fileType]="null" [multiple]="false"
                                              (returnPhoto)="setImage($event, sub,i)">
                            </app-image-upload>
                        </ng-container>
                        <ng-container *ngIf="sub.fileCountLimitation > 1">
                            <app-image-upload [image]="image" [fileType]="null" [multiple]="true"
                                              (returnPhoto)="setImage($event, sub,i)">
                            </app-image-upload>
                        </ng-container>
                    </div>
                </div>
            </ng-container>


        </div>

    </div>
</form>
